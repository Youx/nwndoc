<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>README</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="css/main.css" type="text/css" media="screen" />
    <script src="js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            README
        </h1>
    </div>

    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <h2>Welcome to NWNDoc</h2>
<p>
NWNDoc is a developper documentation to the NWNScript language, used in the
game Neverwinter Nights. It is based on NWNLexicon but with better search options.
</p>

<h2>Getting Started</h2>
<p>
Just write part of a function name in the left bar and here you go!
</p>

<h2>How it works</h2>

<h3>Sources</h3>
<p>NWNDoc uses NWNLexicon as it sources.</p>

<h3>Format</h3>
<p>However, the HTML files were translated into a descriptive format
called YAML.</p>
<p>With YAML, we simply describe how a function help page is represented : 
	There is a "name:" field, a "shortdesc:" field, a "bugs:" field, a "parameters:", with each parameter having
	a type, a name, a description, a default value, ...</p>
<pre>
---
name: MyFunctionName
shortdesc: A short description of the function
parameters:
  - type: int
    name: parameter1
    desc: description of parameter 1
  - type: location
    name: parameter2
    desc: description of parameter 2
    default: DEFAULT_VALUE2
bugs: |
  Here we can write there is a known bug for this function
  and we can span it on multiple lines.
requires: |
  #include "functionrequiresthatfile"
example: |
  Here is an example
</pre>
<p>The good thing about this is that it's a strict descriptive representation, not a visual one (like html). We can then translate this YAML file into whatever form we want</p>

<h3>Transformations</h3>
<h4>YAML -> Textile</h4>
<p>Each YAML file goes through a template (we use ruby liquid templates), we formats it into a textile format</p>
<p>At the end of this process, we obtain a file in the Textile format, that would look like this : </p>
<pre>
h1. MyFunctionName

h4. A short description of the function

MyFunctionName(
  int parameter1, /* description of parameter 1 */
  location parameter2 = DEFAULT_VALUE2 /* description of parameter 2 */
);

h4. Requires

#include "functionrequiresthatfile"

h4. Example

Here is an example

h4. Known bugs

Here we can write there is a known bug for this function
and we can span it on multiple lines.
</pre>
<h4>Textile -> HTML</h4>
<p>The textile file is then processed by textile, h1. is replaced by stuff like \<h1\>\</h1\> and we have a html file</p>

<h3>Indexing</h3>
<p>So what is the purpose you ask? We had NWNLexicon HTML files, we translated them to YAML, so that we could process those into Textile and then back to HTML?</p>
<p>Well, the interesting thing is : YAML can be processed, so we can do more than YAML -> HTML. For example, let's index all the function names and put those into javascript, so that we can easily query the function name or the description of the function!</p>
<p>Or let's index all the Functions and Constants names to put links in the html that point to other functions!</p>

<h3>How to help?</h3>
<p>To modify a function, it's easy : you just modify (or add) the corresponding .yaml file, and just send the modifications.</p>
<p>If you are more technically inclined and know how to use a version system, fork the project on github and I'll just have to pull in the modifications you make.</p>

<h3>How to build</h3>
<p>If you are a developer and want to generate all the HTML files and javascript, you will need : </p>
<ul>
	<li>ruby</li>
	<li>liquid (a ruby gem)</li>
	<li>RedCloth (a ruby gem)</li>
	<li>json (a ruby gem)</li>
	<li>Patience. Generating thousands of files can take some time (5-10 few minutes on my C2D)</li>
</ul>

<h3>What needs to be done</h3>
<p>At the moment, the project is really messy and at a basic stage :</p>
<ul>
	<li>Move the generation to a cleaner rake system</li>
	<li>Add all functions, I haven't put all the lexicon in it yet</li>
	<li>Add all constants and other stuff</li>
	<li>Add documentation for 1.69 stuff</li>
	<li>Add links to functions/constants in the pages</li>
</ul>

<h3>I used stuff from : </h3>
<ul>
	<li>The sdoc project, that created the search function</li>
	<li>The jekyll project for the syntax highlighting bindings and the concept to generate static html from YAML/Textile</li>
</ul>
</div>
    </div>
</div>
</body>
</html>